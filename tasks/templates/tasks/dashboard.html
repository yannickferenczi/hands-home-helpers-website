{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard{% endblock title %}

{% block content %}

<div class="container-fluid container-lg p-2">
    <div class="row">
        <div class="col-12 col-md-8 order-2 order-md-1">
            <!-- Open tasks -->
            <div class="dashboard-item">
                <div class="row">
                    <div class="col align-self-center">
                        <h4>My Tasks</h4>
                    </div>
                </div>
                <div class="row m-0 d-none d-md-flex">
                    <div class="col-5">
                        <p>Description</p>
                    </div>
                    <div class="col-2">
                        <p class="centered-content">Repeat</p>
                    </div>
                    <div class="col-4">
                        <p>Category</p>
                    </div>
                </div>
                {% for task in task_list %}
                {% if not task.done %}
                <div class="row m-0">
                    <hr>
                    <div class="col-10 col-md-5">
                        <a class="task-title" href="{% url 'task_detail' task.id %}">{{ task.name }}</a>
                    </div>
                    <div class="col-2 order-md-4 centered-content">
                        <div class="btn-delete centered-content">
                            <a href="{% url 'task_delete' task.pk %}">
                                <p class="centered-content p-1"><i class="fa-regular fa-trash-can white-text"></i></p>
                            </a>
                        </div>
                    </div>
                    <div class="col-4 col-md-2 centered-content">
                        <p>
                            <span class="d-md-none">Repeat: </span>{% if task.repeat %}
                            <i class="fa-solid fa-square-check green-success"></i>{% else %}No{%endif %}
                        </p>
                    </div>
                    <div class="col-8 col-md-3">
                        <p>{{ task.category }}</p>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <!-- Closed tasks -->
            <div class="dashboard-item bg-dark-subtle grey-text">
                <div class="row">
                    <h3 class="grey-title">Completed tasks</h3>
                </div>
                <div class="row d-none d-md-flex">
                    <div class="col-3">
                        <p>Description</p>
                    </div>
                    <div class="col-2">
                        <p class="centered-content">Date</p>
                    </div>
                    <div class="col-3">
                        <p class="centered-content">Employee's name</p>
                    </div>
                    <div class="col-4">
                        <p>Comments</p>
                    </div>
                </div>
                {% for task in task_list %}
                {% if task.done %}
                <div class="row">
                    <div class="col-6 col-md-3">
                        <p class="grey-text task-title">{{ task.name }}</p>
                    </div>
                    <div class="col-6 col-md-2">
                        <p class="centered-content">{{ task.created_on|date:"Y/m/d" }}</p>
                    </div>
                    <div class="col-6 col-md-3">
                        <p class="centered-content">{{ task.employee.full_name }}</p>
                    </div>
                    <div class="col-6 col-md-4">
                        <p>{% if task.comment %}{{ task.comment }}{% else %}no-comments{% endif %}</p>
                    </div>
                </div>
                <hr>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="col-12 col-md-4 order-1 order-md-2">
            <!-- Upcoming appointments -->
            <div class="dashboard-item">
                <div class="row">
                    <div class="col">
                        <h4>Upcoming appointments</h4>
                    </div>
                </div>
                {% for appointment in appointments %}
                <div class="row">
                    <div class="col  centered-content p-2">
                        <a class="btn btn-secondary" href="{% url 'appointment_detail' appointment.pk %}">
                            {{appointment.appointment_day }} at {{ appointment.appointment_start_time }}
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

</div>

{% endblock content %}
